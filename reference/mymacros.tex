%
% personal macros and hacks
%
\parindent 0pt
\parskip 9pt plus 1pt
\topsep 0pt plus 2pt minus 1pt
\partopsep 9pt plus 2pt minus 1pt
\itemsep 0pt plus 1pt minus 1pt
\parsep 0pt plus 1pt minus 1pt
%\itemsep -\parskip
\arraycolsep 1pt
% floats
\makeatletter
\floatsep 4pt plus 1pt minus 2pt
\textfloatsep 9pt plus 1pt minus 2pt
\intextsep 4pt plus 1pt minus 2pt
\@maxsep 9pt
\dblfloatsep 4pt plus 1pt minus 2pt
\dbltextfloatsep 9pt plus 1pt minus 4pt
\@dblmaxsep 9pt
\def\floatpagefraction{.7}
%
\newbox\sstrutbox
\setbox\sstrutbox=\hbox{\vrule height4.25pt depth1.75pt width\z@}
\newcommand{\sstrut}{\relax\ifmmode\copy\sstrutbox\else\unhcopy\sstrutbox\fi}
\makeatother
\newcommand{\comment}[1]{}
\newcommand{\arrow}{\rightarrow}
\newcommand{\iso}{\cong}
\newcommand{\seq}[2]{{#1}_1,\ldots,{#1}_{#2}}
\newcommand{\indexed}[1]{$\scriptstyle #1$-indexed}
\newcommand{\remindbox}[1]{\begin{center}
\fbox{\parbox{.8\textwidth}{\it #1}}
\end{center}}
\newcommand{\myfigure}[3]{\begin{figure}
\begin{center}
\fbox{\parbox{.95\textwidth}{#3\caption{#2}\label{#1}}}
\end{center}
\end{figure}}
\newcommand{\anno}[1]{[#1]}
\newcommand{\denote}[1]{\lbrack\!\lbrack #1\rbrack\!\rbrack}
\newcommand{\denot}[1]{\lbrace\!\lbrace #1\rbrace\!\rbrace}
\newcommand{\eqvelm}[1]{\langle #1\rangle}
\newcommand{\deqvelm}[1]{\langle\!\langle #1\rangle\!\rangle}
\newcommand{\ddeqvelm}[1]{\langle\!\langle\!\langle
				#1\rangle\!\rangle\!\rangle}
\newcommand{\pair}[1]{\langle #1\rangle}
\newif\ifinlogicrule\inlogicrulefalse
%\newcommand{\logicrule}[2]{\displaystyle\frac{\quad #1\quad}{\quad #2\quad}}
\newlength{\logiclength}
\newcommand{\logicrule}[2]{%
\ifinlogicrule
  \settowidth{\logiclength}{$\displaystyle\frac{#1}{#2}$}%
  \makebox[\logiclength]{$\displaystyle\frac{\quad #1\quad}{\quad #2\quad}$}%
\else
  \inlogicruletrue
  \displaystyle\frac{\quad #1\quad}{\quad #2\quad}
  \inlogicrulefalse
\fi}
%\newcommand{\defeq}{\stackrel{\triangle}{=}}
\newcommand{\defeq}{\stackrel{\rm def}{=}}
\newcommand{\defeqv}{\stackrel{\rm def}{\iff}}
\let\implies=\Rightarrow
\newcommand{\nimplies}{\stackrel{\ast}{\implies}}
\newcommand{\dimplies}{\mathrel{\rlap{$\implies$}\,\implies}}
% commute symbol
\newsavebox{\commutebox}
\savebox{\commutebox}{\rule[-2.5pt]{0pt}{8pt}\begin{picture}(10,10)
\put(5,5){\oval(8,8)[tr]}
\put(5,5){\oval(8,8)[l]}
\put(8.5,5){\vector(0,-1){2}}
\end{picture}}
\newcommand\commute{\usebox{\commutebox}}
% square diagram
%        #2
%    #1 ----> #3
%    |         |
% #4 |   com.  | #5
%    V         V
%    #6 ----> #8
%        #7
% #9 anything
\newcommand{\sqdiagram}[9]{
\setlength{\unitlength}{1mm}
\begin{picture}(60,30)
\put(10,25){\makebox(0,0){$#1$}}
\put(25,27){\makebox(0,0)[b]{$#2$}}
\put(40,25){\makebox(0,0){$#3$}}
\put(15,25){\vector(1,0){20}}
\put(8,15){\makebox(0,0)[r]{$#4$}}
\put(25,15){\makebox(0,0){\commute}}
\put(42,15){\makebox(0,0)[l]{$#5$}}
\put(10,22.5){\vector(0,-1){15}}
\put(40,22.5){\vector(0,-1){15}}
\put(10,5){\makebox(0,0){$#6$}}
\put(25,3){\makebox(0,0)[t]{$#7$}}
\put(15,5){\vector(1,0){20}}
\put(40,5){\makebox(0,0){$#8$}}
#9
\end{picture}}
\newcommand{\ardiagram}[3]{
\setlength{\unitlength}{1mm}
\begin{picture}(50,10)(0,2.5)
\put(10,5){\makebox(0,0)[r]{$#1$}}
\put(12,5){\vector(1,0){26}}
\put(25,7){\makebox(0,0)[b]{$#2$}}
\put(40,5){\makebox(0,0)[l]{$#3$}}
\end{picture}}
\let\lleq=\sqsubseteq
\let\lgeq=\sqsupseteq
\let\lub=\sqcup
\let\Lub=\bigsqcup
\newcommand{\natrightarrow}{\stackrel{\cdot}{\rightarrow}}
\newcommand{\natlongrightarrow}{\stackrel{\cdot}{\longrightarrow}}
\newcommand{\longlongarrow}{\relbar\joinrel\relbar\joinrel\relbar\joinrel\relbar\joinrel\relbar\joinrel\rightarrow}
%\newcommand{\subrightarrow}[1]{\smash{\mathop{\longrightarrow}
%\limits_{\raise2ex\hbox{$\scriptstyle #1$}}}}
\newcommand{\subrightarrow}[1]{\smash{\mathop{\longrightarrow}
\limits^{\scriptstyle #1}}}
\newlength{\rubberlength}
\newcommand{\rubberrightarrow}[1]{%
\settowidth{\rubberlength}{$\scriptstyle\;\;\; #1\;\;\;$}%
\stackrel{#1}{\makebox[\rubberlength]{\rightarrowfill}}}
\mathchardef\headofarrow"3A29
\newcommand{\deprightarrow}{\rightarrow\headofarrow}
\newcommand{\depprod}{\mathrel{{\times}\!{\times}}}
\newcommand{\coloneq}{\mathrel{::=}}
\newcommand{\minfixop}{\underline \mu}
\newcommand{\maxfixop}{\overline \mu}
\newcommand{\minfix}[2]{\minfixop #1.(#2)}
\newcommand{\maxfix}[2]{\maxfixop #1.(#2)}
\newcommand{\reduce}{\triangleright}
\newcommand{\reducen}{\stackrel{\star}{\triangleright}}
% Hacks
\makeatletter
\def\@listi{\leftmargin\leftmargini}
\def\@listii{\leftmargin\leftmarginii
   \labelwidth\leftmarginii\advance\labelwidth-\labelsep}
\def\@listiii{\leftmargin\leftmarginiii
    \labelwidth\leftmarginiii\advance\labelwidth-\labelsep}
\mathsurround=0pt
\mathcode`\:="603A
\def\labelitemi{$\diamond$}
\def\labelitemii{$\scriptscriptstyle\Box$}
\def\labelitemiii{$\scriptscriptstyle\triangle$}
\def\labelitemiv{$\scriptscriptstyle\nabla$}
\newif\if@qed\@qedfalse
\def\@begintheorem#1#2{\global\@qedfalse \rm \trivlist \item[\hskip
\labelsep{\bf #1\ #2:}]}
%\def\qed{{\unskip\nobreak\hfil\penalty50
%  \hskip2em\hbox{}\nobreak\hfil{\rm [\hspace{-0.1em}]}
%  \parfillskip=0pt \finalhyphendemerits=0 \par}}
\newsavebox{\qedbox}
\savebox{\qedbox}{\rm[\hspace{-0.1em}]}
\def\qed{\ifvmode \nobreak \usebox{\qedbox}\else \unskip
~\usebox{\qedbox}\fi \global\@qedtrue}
\def\@endtheorem{\if@qed \else \qed \fi \endtrivlist \global\@qedfalse}
\def\separateproof#1{\rm \trivlist \item[\hskip
\labelsep{\bf Proof\ of\ #1:}]}
\let\endseparateproof=\@endtheorem
\def\contdefinition#1{\rm \trivlist \item[\hskip
\labelsep{\bf Definition\ #1\ {\rm (continued)}:}]}
\let\endcontdefinition=\@endtheorem
\def\leaderfill{\leaders\hbox to 1em{\hss.\hss}\hfill}
\def\thenotationlabel#1{#1\leaderfill}
\def\thenotation{\list{}{\leftmargin\thenotationmargin
       \labelwidth\leftmargin
       \let\makelabel\thenotationlabel}}
\let\endthenotation\endlist
\newdimen\thenotationmargin
\thenotationmargin=8em
\def\notationspace{\par \vskip 10pt plus 5pt minus 3pt\relax}
\def\mapru#1{\smash{\mathop{\longrightarrow}\limits^{#1}}}
\def\maprd#1{\smash{\mathop{\longrightarrow}\limits_{#1}}}
\def\mapdr#1{\Big\downarrow\rlap{$\vcenter{\hbox{$\scriptstyle #1$}}$}}
\def\mapdl#1{\llap{$\vcenter{\hbox{$\scriptstyle #1$}}$}\Big\downarrow}
\def\Hom#1#2#3{{\rm Hom}_{#1}(#2,#3)}
\def\cC{{\cal C}}
\def\cD{{\cal D}}
\def\cE{{\cal E}}
\def\adjoint{\mapstochar\relbar}
\def\fnum@figure{{\bf Figure \thefigure}}
% the following are from plain.tex
\def\eqalign#1{\,\vcenter{\openup\jot\m@th
  \ialign{\strut\hfil$\displaystyle{##}$&$\displaystyle{{}##}$\hfil
      \crcr#1\crcr}}\,}
\def\eqalignno#1{\displ@y \tabskip\@centering
  \halign to\displaywidth{\hfil$\displaystyle{##}$\tabskip\z@skip
    &$\displaystyle{{}##}$\hfil\tabskip\@centering
    &\llap{$##$}\tabskip\z@skip\crcr
    #1\crcr}}
\def\leqalignno#1{\displ@y \tabskip\@centering
  \halign to\displaywidth{\hfil$\displaystyle{##}$\tabskip\z@skip
    &$\displaystyle{{}##}$\hfil\tabskip\@centering
    &\kern-\displaywidth\rlap{$##$}\tabskip\displaywidth\crcr
    #1\crcr}}
% to put lines such as "where", "such that" between lines of an
% alignment display, use the following
\def\interdisplayline#1{%
	\noalign{\hbox{\kern\displayindent 
		\hbox to\displaywidth{#1\hfil}}\penalty
		\predisplaypenalty}}
%
% \cite{A,B} produces [A,B] in latex,  I would like [A, B].
\def\cite{\@ifnextchar [{\@tempswatrue\@citex}{\@tempswafalse\@citex[]}}
\def\@citex[#1]#2{\if@filesw\immediate\write\@auxout{\string\citation{#2}}\fi
  \def\@citea{}\@cite{\@for\@citeb:=#2\do
    {\@citea\def\@citea{,\ }\@ifundefined
       {b@\@citeb}{{\bf ?}\@warning
       {Citation `\@citeb' on page \thepage \space undefined}}%
       {\csname b@\@citeb\endcsname}%
       %\hbox{\csname b@\@citeb\endcsname}%
    }}{#1}}
%
% footnote
\long\def\@makefntext#1{\parindent 0em\noindent\llap{$^{\@thefnmark}$}#1}
%
% displaymath
\def\]{\relax\ifmmode $$%%$$ BRACE MATCH HACK
        \else \@badmath \fi\ignorespaces}
%
% Blackboard Bold font
\newif\ifbbold
%
\bboldtrue
\bboldfalse
%
\ifbbold
\font\fivbb=msym5
\font\sixbb=msym6
\font\sevbb=msym7
\font\egtbb=msym8
\font\ninbb=msym9
\font\tenbb=msym10
\font\elvbb=msym10 \@halfmag
\font\twlbb=msym10 \@magscale1
\font\frtnbb=msym10 \@magscale2
\font\svtnbb=msym10 \@magscale3
\font\twtybb=msym10 \@magscale4
\font\twfvb=msym10 \@magscale5
\newfam\bbfam
\def\@vpt{\def\pbb{\fam\bbfam\fivbb}\textfont\bbfam\fivbb
    \scriptfont\bbfam\fivbb \scriptscriptfont\bbfam\fivbb}
\def\@vipt{\def\pbb{\fam\bbfam\sixbb}\textfont\bbfam\sixbb
    \scriptfont\bbfam\sixbb \scriptscriptfont\bbfam\sixbb}
\def\@viipt{\def\pbb{\fam\bbfam\sevbb}\textfont\bbfam\sevbb
    \scriptfont\bbfam\fivbb \scriptscriptfont\bbfam\fivbb}
\def\@viiipt{\def\pbb{\fam\bbfam\egtbb}\textfont\bbfam\egtbb
    \scriptfont\bbfam\sixbb \scriptscriptfont\bbfam\fivbb}
\def\@ixpt{\def\pbb{\fam\bbfam\ninbb}\textfont\bbfam\ninbb
   \scriptfont\bbfam\sixbb \scriptscriptfont\bbfam\fivbb}
\def\@xpt{\def\pbb{\fam\bbfam\tenbb}\textfont\bbfam\tenbb
   \scriptfont\bbfam\sevbb \scriptscriptfont\bbfam\fivbb}
\def\@xipt{\def\pbb{\fam\bbfam\elvbb}\textfont\bbfam\elvbb
   \scriptfont\bbfam\egtbb \scriptscriptfont\bbfam\sixbb}
\def\@xiipt{\def\pbb{\fam\bbfam\twlbb}\textfont\bbfam\twlbb
   \scriptfont\bbfam\egtbb \scriptscriptfont\bbfam\sixbb}
\def\@xivpt{\def\pbb{\fam\bbfam\frtnbb}\textfont\bbfam\frtnbb
   \scriptfont\bbfam\tenbb \scriptscriptfont\bbfam\sevbb}
\def\@xviipt{\def\pbb{\fam\bbfam\svtnbb}\textfont\bbfam\svtnbb
   \scriptfont\bbfam\twlbb   \scriptscriptfont\bbfam\tenbb}
\def\@xxpt{\def\pbb{\fam\bbfam\twtybb}\textfont\bbfam\twtybb
   \scriptfont\bbfam\frtnbb \scriptscriptfont\bbfam\twlbb}
\def\@xxvpt{\def\pbb{\fam\bbfam\twtybb}\textfont\bbfam\twtybb
   \scriptfont\bbfam\twtybb \scriptscriptfont\bbfam\svtnbb}
\def\bb{\protect\pbb}
\let\cl\cal
\let\cal\bb
\fi
%
% computer environment
\begingroup \catcode `|=0 \catcode `[= 1
\catcode`]=2 \catcode `\{=12 \catcode `\}=12
\catcode`\\=12
|gdef|@xcomputer#1\end{computer}[#1|end[computer]]
|gdef|@xbcomputer#1\end{bcomputer}[#1|end[bcomputer]]
|endgroup
\def\activeul{\catcode`/=\active \catcode`<=\active \catcode`>=\active}
\newif\iful
\def\ulescape{\iful\tt\ulfalse\else\it\ultrue\fi}
\def\ltescape{\iful$<$\else{\tt <}\fi}
\def\gtescape{\iful$>$\else{\tt >}\fi}
{\activeul\global\let/=\ulescape \global\let<=\ltescape \global\let>=\gtescape}
\def\computer{\quote \ulfalse \footnotesize \@verbatim \activeul
\frenchspacing\@vobeyspaces \@xcomputer}
\def\endcomputer{\endtrivlist\endquote}
\def\bcomputer{\quote \ulfalse \@verbatim \activeul
\frenchspacing\@vobeyspaces \@xbcomputer}
\let\endbcomputer=\endcomputer
%
% small font displaymath
\def\sdisplaymath{\begingroup \footnotesize \displaymath}
\def\endsdisplaymath{\enddisplaymath \endgroup}
% end of hack
\makeatother
%
\setlength{\unitlength}{1mm}
%
% Theorems, etc.
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{proposition}[theorem]{Proposition}
%
% end of personal macros
